/*!
 * Copyright (c) 2017 Russell Steadman
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.
 * IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
 * DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
 * OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE
 * OR OTHER DEALINGS IN THE SOFTWARE.
 */
!function(){"use strict";var t,e={o:"object",s:"string",f:"function",b:"boolean",n:"number",r:"regex"},n={},o=function(){var t={angular:typeof angular===e.o&&!!angular,console:!!(typeof console===e.o&&console&&console.log&&console.error&&console.info),alert:typeof alert===e.f&&!!alert,document:typeof document===e.o&&!!document,body:typeof document===e.o&&!!document&&typeof document.body===e.o&&!!document.body,mutation:typeof MutationObserver===e.f&&!!MutationObserver,interval:typeof setInterval===e.f&&typeof clearInterval===e.f&&!!setInterval&&!!clearInterval,window:typeof window===e.o&&!!window,module:"undefined"!=typeof module&&module.exports};for(var o in t){n[o]=t[o]}return n};!function(){var e=[],n=!1,o=!1;t=function(t,i){var r=function(){if(!n){n=!0;for(var t=0;t<e.length;t++){e[t].fn.call(this,e[t].ctx)}e=[]}}.bind(i),s=function(){"complete"===document.readyState&&r()};if("function"!=typeof t){throw new TypeError("callback for docReady(fn) must be a function")}if(n){return void setTimeout(function(){t.bind(i)()},1)}e.push({fn:t,ctx:i}),"complete"===document.readyState?setTimeout(r,1):o||(document.addEventListener?(document.addEventListener("DOMContentLoaded",r,!1),window.addEventListener("load",r,!1)):(document.attachEvent("onreadystatechange",s),window.attachEvent("onload",r)),o=!0)}}();var i=function(t,e,n,o){return"http://teamtofu.github.io/onebang/errors/?error="+t+"&one="+encodeURIComponent(e)+"&two="+encodeURIComponent(n)+"&three="+encodeURIComponent(o)},r=[{regex:/^\_\_.*$/,len:2,id:"__"},{regex:/^b\_.*$/,len:2,id:"b_"},{regex:/^B\_.*$/,len:2,id:"B_"},{regex:/^!.*$/,len:1,id:"!"},{regex:/^\:\:.*$/,len:2,id:"::"},{regex:/^1.*$/,len:1,id:"1"}],s=function(t,e){var n=e.getAttribute("class");n=n?n.split(" "):[];for(var o in t){-1===n.indexOf(t[o])&&n.push(encodeURIComponent(t[o]))}e.setAttribute("class",n.join(" ").trim())},a=function(t,n,o){var i="onebang_isolate",s=o.getAttribute(i)?o.getAttribute(i).split(" "):[],a=typeof o.getAttribute(n+t)===e.s?n+t:null;if(a){s.push(a)}else{for(var u in r){if(a=typeof o.getAttribute(r[u].id+t)===e.s?r[u].id+t:null){s.push(a);break}}}o.removeAttribute(a),o.setAttribute(i,s.join(" "))},u={console:function(t){for(var e in t){o().console&&console.log(t[e])}},class:function(t){s(t,this)},c:"class",hash:function(t){var n=this.getAttribute("href");n=typeof n===e.s?n.split("#"):["",""],n[1]=t[0]?t[0]:"",this.setAttribute("href",n.join("#"))},"#":"hash",icon:function(t){switch(t[0]){case"fa":case"fontawesome":s(["fa","fa-"+t[1],t[2]?"fa-"+t[2]+"x":"",t[3]?"fa-spin":""],this);break;case"ion":case"ionicon":s(["ion","icon","ion-"+t[1]],this);break;case"gly":case"glyph":case"glyphicon":s(["glyphicon","glyphicon-"+t[1]],this);break;case"oi":case"openicon":s(["oi","oi-"+t[1]],this)}},i:"icon",id:function(t){t[0]?this.setAttribute("id",t[0]):this.removeAttribute("id")},exclaim:function(t,n,o,r){if(typeof n===e.o&&n){var a=[];n.default||(n.default="");for(var u in t){-1===a.indexOf(t[u]?n[t[u]]:n.default)&&(t[u]?n[t[u]]?a.push(n[t[u]]):r(i("ai",t[u])):a.push(n.default))}t[0]||a.push(n.default),s(a,this)}},"!":"exclaim",style:function(t,e,n,o){if(!t[0]||!t[1]){return o(i("aj"))}this.style[t[0]]=t[1].replace(/\_/g," ")},s:"style",hide:function(){this.style.display="none"}},f=function(t,n){if(typeof t===e.s){t=t.replace(/\ /g,"");if(/^([0-9]+)((?:%)|(?:[a-z]{2,4}))$/.test(t)){return t}}return n("Size validation failed for "+t+"."),"0px"},c={height:function(t){this.style.height=f(t[0])},h:"height",width:function(t){this.style.width=f(t[0])},w:"width","min-height":function(t){this.style["min-height"]=f(t[0])},hmin:"min-height","min-width":function(t){this.style["min-width"]=f(t[0])},wmin:"min-width","max-height":function(t){this.style["max-height"]=f(t[0])},hmax:"max-height","max-width":function(t){this.style["max-width"]=f(t[0])},wmax:"max-width",center:function(){this.style["text-align"]="center",this.style.display="block",this.style["margin-left"]="auto",this.style["margin-right"]="auto"},cen:"center"},d=function(s){this.version="1.0.2",this.options={developerMode:!1,debugMode:!1,userBang:"!",userBangRegex:/^\!.*$/,userConnector:":",userConnectorRegex:/\:/g,functions:{},angular:!1,removeBangPrefixes:[]};var f={developerMode:e.b,debugMode:e.b,userBang:e.s,userBangRegex:e.o+"&"+e.r,userConnector:e.s,userConnectorRegex:e.o+"&"+e.r,functions:e.o,angular:e.b,removeBangPrefixes:e.o};if(n.settings=typeof s===e.o&&!!s,o().settings){for(var d in s){this.options[d]=s[d]}}for(var h in f){if(-1===f[h].split("&").indexOf(typeof this.options[h])){throw new Error(i("ah",h,typeof this.options[h],f[h]))}}for(var l in this.options.removeBangPrefixes){for(var p in r){if(this.options.removeBangPrefixes[l]===r[p].id){r=r.splice(p,1);break}}}this.events=[];var g=function(t){o().console?console.error("(OneBang) "+t):typeof alert===e.f&&this.options.developerMode&&alert(t),this.events.push(t)}.bind(this),v=function(t){o().console&&this.options.debugMode&&console.info("(OneBang) "+t),this.events.push(t)}.bind(this);t(function(){o().document?o().body||g(i("ab")):g(i("aa"))},this);var b;o().mutation?b=new MutationObserver(function(){this.interpret()}.bind(this)):g(i("ac"));var m=function(t){var e=t.childNodes;for(var n in e){m(e[n])}y(t)}.bind(this),y=function(t){var e=t.attributes;if(e){var n=[];for(var o in e){var i=e[o].name;if(this.options.userBangRegex.test(i)){n.push(i.substr(this.options.userBang.length))}else{for(var s in r){if(r[s].regex.test(i)){n.push(i.substr(r[s].len));break}}}}w(t,n)}}.bind(this),w=function(t,n){for(var s in n){var u=n[s].split(this.options.userConnector),f=u[0];if(u.splice(0,1),""===n[s]){return}for(;typeof this.q[f]===e.s;){f=this.q[f]}if(typeof this.q[f]===e.f){var c=this.options.functions[f];try{this.q[f]&&this.q[f].bind(t)(u,c||{},this.version,g,v)}catch(t){g('Function "'+f+'" from "'+n[s]+'" failed.'),o().console&&console.error(t)}t.removeAttribute(this.options.userBang+n[s]);for(var d in r){t.removeAttribute(r[d].id+n[s])}}else{a(n[s],this.options.userBang,t),g(i("ad",n[s],f))}}}.bind(this);this.q={};var x=[u,c],B=function(){for(var t in x){for(var e in x[t]){this.q[e]=x[t][e]}}}.bind(this);B(),this.addplugin=function(t,e){var n={};n[t]=e,x.push(n),B()},this.addplugins=function(t){x.push(t),B()},this.interpret=function(t){return t=t||document.body,m(t),t},t(function(){this.interpret(document.body)},this),typeof b===e.o&&t(function(){b.observe(document.body,{attributes:!0,childList:!0,subtree:!0})},this);var A=null;this.interval=function(t){o().interval?typeof t!==e.n&&null===A?(clearInterval(A),A=null,v("Interval-based updates were stopped.")):typeof t===e.n&&t>0?(A=setInterval(function(){this.interpret(document.body)}.bind(this),t),v("Interval-based updates were started.")):g(i("ae")):g(i("af"))}};if(o().angular){var h=angular.module("oneBang",[]);h.factory("$oneBang",function(){var t=function(t){return t=typeof t===e.o&&t?t:{},t.angular=!0,typeof window.onebang===e.f&&window.onebang(t),window.onebang};return function(e){return t(e)}});var l=function(){return{link:function(t,n){typeof n[0]===e.o&&(n=n[0]),window.onebang.interpret(n)}}},p=["!","bang","::"];for(var g in p){h.directive(p[g],l)}}var v=function(t){window.onebang=new d(t)},b=function(t){return typeof window.onebang===e.f&&v.bind(this)(t),null};if(!o().window){throw new Error("(OneBang) "+i("ag"))}window.onebang=v.bind(this),o().module&&(module.exports=b.bind(this))}();